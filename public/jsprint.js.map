{"version":3,"sources":["app/jsprint.coffee"],"names":[],"mappings":"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","file":"public/jsprint.js","sourcesContent":["YL_Doc = undefined\ndoc = undefined\nYL_Doc = ->\n  aRef = undefined\n  adaptPage = undefined\n  createSummary = undefined\n  headerFooter = undefined\n  imgLegends = undefined\n  _CONFIG = undefined\n  _getHeader = undefined\n  _CONFIG = {}\n  _CONFIG[\"class\"] =\n    title: \"yld-title\"\n    page: \"yld-page\"\n    \"def-header\": \"yld-def-header\"\n    header: \"yld-page-header\"\n    footer: \"yld-page-footer\"\n    \"page-summary\": \"yld-page-summary\"\n    summary: \"yld-summary\"\n    \"summary-entry\": \"yld-summary-entry\"\n    \"img-legend\": \"yld-img-legend\"\n    bibliography: \"yld-bibliography\"\n    imageography: \"yld-imageography\"\n    pagenbr: \"yld-pagenbr\"\n\n  _CONFIG.settings =\n    \"title-nbr\": true\n    \"page-nbr\": true\n    \"page-outof\": true\n    \"page-outof-symbole\": \"/\"\n    \"auto-refresh\": false\n    \"auto-interval\": 2000\n\n  _CONFIG.counters =\n    img: 0\n    a: 0\n\n  _CONFIG.summary = nbrtitle: 45\n  @init = ->\n    imgLegends()\n    aRef()\n    headerFooter()\n    createSummary()\n    setInterval \"location.reload(true)\", _CONFIG.settings[\"auto-interval\"]  if _CONFIG.settings[\"auto-refresh\"]\n\n  imgLegends = ->\n    $(\"img\").each ->\n      ref = undefined\n      title = undefined\n      title = $(this).attr(\"title\")\n      ref = $(this).attr(\"ref\")\n      if title\n        _CONFIG.counters[\"img\"]++\n        $(this).after \"<div class='\" + _CONFIG[\"class\"][\"img-legend\"] + \"'>\" + title + \" <sup>\" + _CONFIG.counters[\"img\"] + \"</sup></div>\"\n        $(\".\" + _CONFIG[\"class\"][\"imageography\"]).append \"<div>[\" + _CONFIG.counters[\"img\"] + \"] \" + title + \" <i>(\" + ref + \"</i>)</div>\"\n\n\n  aRef = ->\n    $(\"a\").each ->\n      link = undefined\n      ref = undefined\n      show = undefined\n      text = undefined\n      _CONFIG.counters[\"a\"]++\n      link = $(this).attr(\"href\")\n      text = $(this).text()\n      ref = $(this).attr(\"ref\")\n      show = text\n      show = ref + \"(\" + text + \")\"  if ref isnt undefined\n      $(this).append \" <sup>[\" + _CONFIG.counters[\"a\"] + \"]</sup>\"\n      $(\".\" + _CONFIG[\"class\"][\"bibliography\"]).append \"<div>\" + \"<span class='index'>[\" + _CONFIG.counters[\"a\"] + \"] </span>\" + \"<span class='text'>\" + show + \": \" + \"<span class='link'><a href='\" + link + \"'>\" + link + \"</a></div>\"\n\n\n  _getHeader = ->\n    \"<div class=\" + _CONFIG[\"class\"][\"header\"] + \">\" + ($(\".\" + _CONFIG[\"class\"][\"def-header\"]).html() or \"\") + \"</div>\"\n\n  headerFooter = ->\n    $(\".\" + _CONFIG[\"class\"][\"page\"]).each (i, page) ->\n      outof = undefined\n      pagenbr = undefined\n      pagenbr = i + 1\n      $(page).prepend _getHeader()\n      $(page).append \"<div class=\" + _CONFIG[\"class\"][\"footer\"] + \"></div>\"\n      outof = \"\"\n      outof = _CONFIG.settings[\"page-outof-symbole\"] + $(\".yld-page\").length  if _CONFIG.settings[\"page-outof\"]\n      $(page).find(\".\" + _CONFIG[\"class\"][\"footer\"]).append \"<div class=\" + _CONFIG[\"class\"][\"pagenbr\"] + \">\" + pagenbr + outof + \"</div>\"  if _CONFIG.settings[\"page-nbr\"]\n\n\n  createSummary = ->\n    JSP_TITLE2_NBR = undefined\n    JSP_TITLE3_NBR = undefined\n    JSP_TITLE4_NBR = undefined\n    JSP_TITLE_NBR = undefined\n    nbrtitle = undefined\n    pagenbr = undefined\n    JSP_TITLE_NBR = 0\n    JSP_TITLE2_NBR = 0\n    JSP_TITLE3_NBR = 0\n    JSP_TITLE4_NBR = 0\n    pagenbr = 0\n    nbrtitle = 0\n    $(\".\" + _CONFIG[\"class\"][\"page\"]).each (i, page) ->\n      pagenbr++\n      $(page).find(\".\" + _CONFIG[\"class\"][\"title\"]).each (_, title) ->\n        h_nbr = undefined\n        t = undefined\n        tag = undefined\n        t = $(title).text()\n        tag = $(this)[0].tagName\n        h_nbr = \"\"\n        nbrtitle++\n        if tag is \"H1\"\n          JSP_TITLE_NBR++\n          JSP_TITLE2_NBR = 0\n          h_nbr = JSP_TITLE_NBR\n        if tag is \"H2\"\n          JSP_TITLE2_NBR++\n          JSP_TITLE3_NBR = 0\n          h_nbr = JSP_TITLE_NBR + \".\" + JSP_TITLE2_NBR\n        if tag is \"H3\"\n          JSP_TITLE3_NBR++\n          JSP_TITLE4_NBR = 0\n          h_nbr = JSP_TITLE_NBR + \".\" + JSP_TITLE2_NBR + \".\" + JSP_TITLE3_NBR\n        if tag is \"H4\"\n          JSP_TITLE4_NBR++\n          h_nbr = JSP_TITLE_NBR + \".\" + JSP_TITLE2_NBR + \".\" + JSP_TITLE3_NBR + \".\" + JSP_TITLE4_NBR\n        $(title).text h_nbr + \" \" + t  if _CONFIG.settings[\"page-nbr\"]\n        if nbrtitle % _CONFIG.summary[\"nbrtitle\"] is 0\n          $(\".\" + _CONFIG[\"class\"][\"page-summary\"]).last().after \"</div><div class='\" + _CONFIG[\"class\"][\"page-summary\"] + \" \" + _CONFIG[\"class\"][\"page\"] + \"'><div class='\" + _CONFIG[\"class\"][\"summary\"] + \"'></div>\"\n          $(\".\" + _CONFIG[\"class\"][\"page-summary\"]).last().prepend _getHeader()\n        $(\".\" + _CONFIG[\"class\"][\"summary\"]).last().append \"<div class='\" + _CONFIG[\"class\"][\"summary\"] + \"-\" + tag + \" \" + _CONFIG[\"class\"][\"summary-entry\"] + \"'>\" + h_nbr + \" \" + t + \"<div>\" + pagenbr + \"</div></div>\"\n\n\n\n  adaptPage = ->\n    $(\".\" + JSP_PAGE_CLASS).each (i, page) ->\n      page_elements = undefined\n      pages = undefined\n      tmp_content = undefined\n      totalH = undefined\n      totalH = 0\n      pages = [ $(this) ]\n      page_elements = []\n      tmp_content = []\n      $(this).children().each ->\n        elH = undefined\n        new_page = undefined\n        elH = $(this).outerHeight()\n        if (totalH + elH) < JSP_PAGE_PIXEL\n          tmp_content.push $(this)\n          totalH += elH\n        else\n          page_elements.push tmp_content\n          tmp_content = [ $(this) ]\n          totalH = elH\n          new_page = createPage(\"?\")\n          pages[pages.length - 1].after new_page\n          pages.push new_page\n\n      page_elements.push tmp_content\n      i = 0\n      while i < page_elements.length\n        pages[i].text(\"\").append page_elements[i]\n        i++\n\n\ndoc = new YL_Doc()\ndoc.init()\n"]}